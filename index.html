<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°—Ç–æ–ø –ª–∏—Å—Ç</title>
<meta name="theme-color" content="#f6f7fb">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Stop List">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js" defer></script>
<script src="app.js" defer></script>

</head>
<body>
<div class="layout">
  <header class="page-header">
    <h1>–°—Ç–æ–ø –ª–∏—Å—Ç</h1>
    <div id="header-time" class="header-time" aria-live="polite"></div>
    <div id="header-weather" class="header-weather" aria-live="polite">–û–¥–µ—Å—Å–∞: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –∏ –≤–æ–¥—ã...</div>
    <div id="deviceInfo"
      style="
      position:fixed;
      top:calc(10px + env(safe-area-inset-top));
      left:10px;
      background:black;
      color:white;
      padding:10px;
      border-radius:10px;
      z-index:9999;">
      –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...
    </div>
    <script>
      function detectDevice() {
        const ua = navigator.userAgent || "";
        const isIOS = /iPhone|iPad|iPod/i.test(ua);
        const isSafari = /Safari/i.test(ua) && !/CriOS|FxiOS|EdgiOS|OPiOS/i.test(ua);
        const isStandalone = window.navigator.standalone === true || window.matchMedia("(display-mode: standalone)").matches;
        let result = "";

        if (isStandalone) {
          result = "‚úÖ –ó–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (APP mode)";
        } else if (isIOS && isSafari) {
          result = "üì± iPhone Safari (–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ APP)";
        } else if (isIOS && !isSafari) {
          result = "üì± iPhone, –Ω–æ –ù–ï Safari (Google/Chrome)";
        } else {
          result = "üíª –ü–ö –∏–ª–∏ Android";
        }

        const el = document.getElementById("deviceInfo");
        if (el) el.innerText = result;
      }

      detectDevice();
    </script>
  </header>
  <main id="app"></main>
</div>
<aside id="iphone-install-prompt" class="ios-install-prompt" aria-live="polite" aria-label="Install app prompt for iPhone">
  <button id="iphone-install-close" class="ios-install-close" type="button" aria-label="Close iPhone install prompt">√ó</button>
  <div class="ios-install-head">
    <div class="ios-install-icon" aria-hidden="true">SL</div>
    <div class="ios-install-meta">
      <div class="ios-install-title">Stop List</div>
      <div class="ios-install-desc">Install on iPhone Home Screen</div>
    </div>
  </div>
  <div class="ios-install-steps">Tap Share ‚Üí Add to Home Screen</div>
  <div class="ios-install-actions">
    <button id="open-in-safari" class="open-in-safari" type="button">–û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ Safari</button>
  </div>
</aside>
<aside id="android-install-prompt" class="ios-install-prompt" aria-live="polite" aria-label="Install app prompt for Android">
  <button id="android-install-close" class="ios-install-close" type="button" aria-label="Close Android install prompt">√ó</button>
  <div class="ios-install-head">
    <div class="ios-install-icon" aria-hidden="true">SL</div>
    <div class="ios-install-meta">
      <div class="ios-install-title">Stop List</div>
      <div class="ios-install-desc">Install app in Google Chrome</div>
    </div>
  </div>
  <div class="ios-install-steps">In Chrome: Menu ‚ãÆ ‚Üí Add to Home screen</div>
  <div class="ios-install-actions">
    <button id="install-in-chrome" class="open-in-chrome" type="button">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ Chrome</button>
  </div>
</aside>
</body>
</html>
