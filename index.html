<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°—Ç–æ–ø –ª–∏—Å—Ç</title>
<meta name="theme-color" content="#f6f7fb">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Stop List">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging-compat.js" defer></script>
<script src="app.js" defer></script>

</head>
<body class="splash-open">
<div id="splash-screen" class="splash-screen" aria-hidden="true">
  <div class="splash-card">
    <img src="apple-touch-icon.png" alt="" class="splash-icon">
    <div class="splash-title">–°—Ç–æ–ø –ª–∏—Å—Ç</div>
  </div>
</div>
<div class="layout">
  <header class="page-header">
    <h1>–°—Ç–æ–ø –ª–∏—Å—Ç</h1>
    <div id="header-time" class="header-time" aria-live="polite"></div>
    <div id="header-weather" class="header-weather" aria-live="polite">–û–¥–µ—Å—Å–∞: –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –∏ –≤–æ–¥—ã...</div>
    <div class="header-actions">
      <button id="clear-stop-list" class="clear-stop-list-btn" type="button">–£–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ø –ª–∏—Å—Ç</button>
      <a class="rating-link-btn" href="rating.html">–†–µ–π—Ç–∏–Ω–≥ —Å—Ç–æ–ø –ª–∏—Å—Ç–∞</a>
    </div>
    <div id="deviceInfo"
      style="
      position:fixed;
      top:calc(10px + env(safe-area-inset-top));
      left:10px;
      background:black;
      color:white;
      padding:6px 8px;
      border-radius:8px;
      font-size:11px;
      line-height:1.2;
      z-index:9999;
      opacity:0.92;
      transition:opacity .5s ease;">
      –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...
    </div>
    <script>
      function detectBrowser(ua) {
        if (/Edg/i.test(ua)) return "Edge";
        if (/OPR|Opera/i.test(ua)) return "Opera";
        if (/CriOS|Chrome/i.test(ua)) return "Chrome";
        if (/FxiOS|Firefox/i.test(ua)) return "Firefox";
        if (/Safari/i.test(ua)) return "Safari";
        return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä";
      }

      function detectDevice() {
        const ua = navigator.userAgent || "";
        const isIOS = /iPhone|iPad|iPod/i.test(ua);
        const isAndroid = /Android/i.test(ua);
        const isSafari = /Safari/i.test(ua) && !/CriOS|FxiOS|EdgiOS|OPiOS/i.test(ua);
        const isStandalone = window.navigator.standalone === true || window.matchMedia("(display-mode: standalone)").matches;
        const browser = detectBrowser(ua);
        let result = "";

        if (isStandalone) {
          result = "‚úÖ APP mode";
        } else if (isIOS && isSafari) {
          result = "üì± iPhone ‚Ä¢ Safari";
        } else if (isIOS && !isSafari) {
          result = `üì± iPhone ‚Ä¢ ${browser}`;
        } else if (isAndroid) {
          result = `ü§ñ Android ‚Ä¢ ${browser}`;
        } else {
          result = `üíª –ü–ö ‚Ä¢ ${browser}`;
        }

        const el = document.getElementById("deviceInfo");
        if (!el) return;
        el.innerText = result;
        setTimeout(() => {
          el.style.opacity = "0";
          setTimeout(() => { el.style.display = "none"; }, 520);
        }, 5000);
      }

      detectDevice();
    </script>
  </header>
  <main id="app"></main>
</div>
<aside id="iphone-install-prompt" class="ios-install-prompt" aria-live="polite" aria-label="Install app prompt for iPhone">
  <button id="iphone-install-close" class="ios-install-close" type="button" aria-label="Close iPhone install prompt">√ó</button>
  <div class="ios-install-head">
    <div class="ios-install-icon" aria-hidden="true">SL</div>
    <div class="ios-install-meta">
      <div class="ios-install-title">Stop List</div>
      <div class="ios-install-desc">Install on iPhone Home Screen</div>
    </div>
  </div>
  <div class="ios-install-steps">Tap Share ‚Üí Add to Home Screen</div>
  <div class="ios-install-actions">
    <button id="open-in-safari" class="open-in-safari" type="button">–û—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ Safari</button>
  </div>
</aside>
<aside id="android-install-prompt" class="ios-install-prompt" aria-live="polite" aria-label="Install app prompt for Android">
  <button id="android-install-close" class="ios-install-close" type="button" aria-label="Close Android install prompt">√ó</button>
  <div class="ios-install-head">
    <div class="ios-install-icon" aria-hidden="true">SL</div>
    <div class="ios-install-meta">
      <div class="ios-install-title">Stop List</div>
      <div class="ios-install-desc">Install app in Google Chrome</div>
    </div>
  </div>
  <div class="ios-install-steps">In Chrome: Menu ‚ãÆ ‚Üí Add to Home screen</div>
  <div class="ios-install-actions">
    <button id="install-in-chrome" class="open-in-chrome" type="button">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ Chrome</button>
  </div>
</aside>
</body>
</html>
